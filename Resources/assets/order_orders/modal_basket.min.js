const basket=document.querySelector("#modal");basket.addEventListener("shown.bs.modal",function(event){setTimeout(function initModalBasket(){let input=basket.querySelector("#order_product_form_price_total");if(input){input.addEventListener("input",orderModalCounter.debounce(300));basket.querySelector("#plus").addEventListener("click",()=>{let price_total=basket.querySelector("#order_product_form_price_total");let result=price_total.value*1;let max=price_total.dataset.max*1;if(result<max){result=result+1;basket.querySelector("#order_product_form_price_total").value=result;orderModalSum(result)}});basket.querySelector("#minus").addEventListener("click",()=>{let price_total=basket.querySelector("#order_product_form_price_total");let result=price_total.value*1;if(result>1){result=result-1;basket.querySelector("#order_product_form_price_total").value=result;orderModalSum(result)}});return}setTimeout(initModalBasket,100)},100)});function orderModalCounter(){let result=this.value*1;let max=this.dataset.max*1;if(result>max){basket.querySelector("#order_product_form_price_total").value=max;result=max}orderModalSum(result)}function orderModalSum(result){let product_summ=basket.querySelector("#summ_order_product_form_price_total");let result_product_sum=result*product_summ.dataset.price;if(product_summ.dataset.discount){result_product_sum=result_product_sum-result_product_sum/100*product_summ.dataset.discount}result_product_sum=result_product_sum/100;result_product_sum=new Intl.NumberFormat($lang,{style:"currency",currency:product_summ.dataset.currency,maximumFractionDigits:0}).format(result_product_sum);product_summ.innerText=result_product_sum}