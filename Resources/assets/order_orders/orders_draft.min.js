userProfileType=document.getElementById("new_order_form_usr_userProfile_type");if(userProfileType){userProfileType.addEventListener("change",function(event){let forms=this.closest("form");submitProfileForm(forms);return false})}document.querySelectorAll('input[name="new_order_form[usr][payment][payment]"]').forEach(function(userPayment){userPayment.addEventListener("change",function(event){let forms=this.closest("form");submitPaymentForm(forms);return false})});document.querySelectorAll('input[name="new_order_form[usr][delivery][delivery]"]').forEach(function(userPayment){userPayment.addEventListener("change",function(event){let forms=this.closest("form");submitDeliveryForm(forms);return false})});document.querySelectorAll("select.change_region_field").forEach(function(userRegion){userRegion.addEventListener("change",function(event){let forms=this.closest("form");submitRegionForm(forms,userRegion.id);return false})});async function submitDeliveryForm(forms){const data=new FormData(forms);await fetch(forms.action,{method:forms.method,cache:"no-cache",credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"},redirect:"follow",referrerPolicy:"no-referrer",body:data}).then(response=>{if(response.status!==200){return false}return response.text()}).then(data=>{if(data){var parser=new DOMParser;var doc=parser.parseFromString(data,"text/html");let user_delivery=doc.getElementById("user_delivery");document.getElementById("user_delivery").replaceWith(user_delivery);document.querySelectorAll('input[name="new_order_form[usr][delivery][delivery]"]').forEach(function(user_delivery){user_delivery.addEventListener("change",function(event){let forms=this.closest("form");submitDeliveryForm(forms);return false})});document.querySelectorAll("select.change_region_field").forEach(function(userRegion){userRegion.addEventListener("change",function(event){let forms=this.closest("form");submitRegionForm(forms,userRegion.id);return false})});var tooltipTriggerList=[].slice.call(user_delivery.querySelectorAll('[data-bs-toggle="tooltip"]'));tooltipTriggerList.map(function(tooltipTriggerEl){return new bootstrap.Tooltip(tooltipTriggerEl)});document.querySelector("[data-latitude]").value="";document.querySelector("[data-longitude]").value="";limitOxMvRIBczY=100;setTimeout(function OxMvRIBczY(){console.log("initAdddress");console.log(typeof initAdddress);if(typeof initAdddress=="function"){initAdddress();return}if(limitOxMvRIBczY>1e3){return}limitOxMvRIBczY=limitOxMvRIBczY*2;setTimeout(OxMvRIBczY,limitOxMvRIBczY)},100)}});return false}async function submitRegionForm(forms,id){const data=new FormData(forms);await fetch(forms.action,{method:forms.method,cache:"no-cache",credentials:"same-origin",redirect:"follow",referrerPolicy:"no-referrer",body:data}).then(response=>{if(response.status!==200){return false}return response.text()}).then(data=>{if(data){var parser=new DOMParser;var doc=parser.parseFromString(data,"text/html");let callId=id.replace(/_region/g,"_call");let call=doc.getElementById(callId);document.getElementById(callId).replaceWith(call);document.querySelector("[data-latitude]").value="";document.querySelector("[data-longitude]").value="";limitZJzxDhmvtC=100;setTimeout(function ZJzxDhmvtC(){if(typeof initAdddress=="function"){initAdddress();return}if(limitZJzxDhmvtC>1e3){return}limitZJzxDhmvtC=limitZJzxDhmvtC*2;setTimeout(ZJzxDhmvtC,limitZJzxDhmvtC)},100)}});return false}async function submitPaymentForm(forms){const data=new FormData(forms);await fetch(forms.action,{method:forms.method,cache:"no-cache",credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"},redirect:"follow",referrerPolicy:"no-referrer",body:data}).then(response=>{if(response.status!==200){return false}return response.text()}).then(data=>{if(data){var parser=new DOMParser;var doc=parser.parseFromString(data,"text/html");let user_payment=doc.getElementById("user_payment");document.getElementById("user_payment").replaceWith(user_payment);document.querySelectorAll('input[name="new_order_form[usr][payment][payment]"]').forEach(function(user_payment){user_payment.addEventListener("change",function(event){let forms=this.closest("form");submitPaymentForm(forms);return false})});var tooltipTriggerList=[].slice.call(user_payment.querySelectorAll('[data-bs-toggle="tooltip"]'));tooltipTriggerList.map(function(tooltipTriggerEl){return new bootstrap.Tooltip(tooltipTriggerEl)})}});return false}async function submitProfileForm(forms){const data=new FormData(forms);await fetch(forms.action,{method:forms.method,cache:"no-cache",credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"},redirect:"follow",referrerPolicy:"no-referrer",body:data}).then(response=>{if(response.status!==200){return false}return response.text()}).then(data=>{if(data){var parser=new DOMParser;var doc=parser.parseFromString(data,"text/html");let user_profile=doc.getElementById("user_profile");document.getElementById("user_profile").replaceWith(user_profile);user_profile.addEventListener("change",function(event){let forms=this.closest("form");submitProfileForm(forms);return false});let user_payment=doc.getElementById("user_payment");document.getElementById("user_payment").replaceWith(user_payment);document.querySelectorAll('input[name="new_order_form[usr][payment][payment]"]').forEach(function(userPayment){userPayment.addEventListener("change",function(event){let replaceId="user_profile";let forms=this.closest("form");submitPaymentForm(forms);return false})});let user_delivery=doc.getElementById("user_delivery");document.getElementById("user_delivery").replaceWith(user_delivery);document.querySelectorAll('input[name="new_order_form[usr][delivery][delivery]"]').forEach(function(user_delivery){user_delivery.addEventListener("change",function(event){let forms=this.closest("form");submitDeliveryForm(forms);return false})});var tooltipTriggerList=[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));tooltipTriggerList.map(function(tooltipTriggerEl){return new bootstrap.Tooltip(tooltipTriggerEl)})}});return false}